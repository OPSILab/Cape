{"openapi":"3.0.1","info":{"title":"CaPe API - Consent Manager","description":"CaPe APIs used to manage CaPe Consent Form, Consent Records and consenting operations","version":"2.0"},"servers":[{"url":"http://localhost:8083/consent-manager","description":"Generated server url"}],"security":[{"bearer-key":[]}],"tags":[{"name":"Consent Record","description":"Consent Manager APIs to manage CaPe Consent Records."},{"name":"Consenting","description":"Consent Manager APIs to perform CaPe Consenting operations."}],"paths":{"/api/v2/users/{surrogateId}/consents":{"get":{"tags":["Consent Record"],"summary":"Get the list of signed Consent Records for the input Surrogate Id.","operationId":"getConsentRecordsBySurrogateId","parameters":[{"name":"surrogateId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the list of signed Consent Records belonging to the User linked with the input Surrogate Id.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ConsentRecordSigned"}}}}}}},"post":{"tags":["Consenting"],"summary":"Give the Consent for the input ConsentForm. Return Consent Record signed with the Acccount private key.","operationId":"giveConsentFromService","parameters":[{"name":"surrogateId","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentForm"}}},"required":true},"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"201":{"description":"Returns 201 Created with the created Consent Record Signed.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentRecordSigned"}}}}}}},"/api/v2/users/{surrogateId}/service/{serviceId}/purpose/{purposeId}/consentForm":{"get":{"tags":["Consenting"],"summary":"Generate Consent Form for surrogateId, sinkId and sourceId (if any) in input.","operationId":"fetchConsentFormFromService","parameters":[{"name":"surrogateId","in":"path","required":true,"schema":{"type":"string"}},{"name":"serviceId","in":"path","required":true,"schema":{"type":"string"}},{"name":"purposeId","in":"path","required":true,"schema":{"type":"string"}},{"name":"sourceDatasetId","in":"query","required":false,"schema":{"type":"string"}},{"name":"sourceServiceId","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the generated Consent Form containing the Resource Set generated either by matching Sink and Source datasets' mappings (3-party reuse) or from the datasets of the service (Within Service)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentForm"}}}}}}},"/api/v2/service/{serviceId}/purpose/{purposeId}/matchingDataset":{"get":{"tags":["Consenting"],"summary":"Get the list of Data Consent Form for surrogateId, sinkId and sourceId (if any) in input.","operationId":"getMatchingDatasets","parameters":[{"name":"serviceId","in":"path","required":true,"schema":{"type":"string"}},{"name":"purposeId","in":"path","required":true,"schema":{"type":"string"}},{"name":"sourceDatasetId","in":"query","required":false,"schema":{"type":"string"}},{"name":"sourceServiceId","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the generated Consent Form containing the Resource Set generated either by matching Sink and Source datasets' mappings (3-party reuse) or from the datasets of the service (Within Service)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentForm"}}}}}}},"/api/v2/accounts/{accountOrSurrogateId}/servicelinks/{slrId}/consents/{crId}/statuses":{"post":{"tags":["Consenting"],"summary":"Change status (from Operator) of a Consent for the input AccountId, Slr Id and Cr Id.","operationId":"changeConsentStatus","parameters":[{"name":"accountOrSurrogateId","in":"path","required":true,"schema":{"type":"string"}},{"name":"slrId","in":"path","required":true,"schema":{"type":"string"}},{"name":"crId","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeConsentStatusRequest"}}},"required":true},"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"201":{"description":"Returns 201 Created with the new Consent Status Record Signed.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentStatusRecordSigned"}}}}}}},"/api/v2/accounts/{accountId}/consents":{"get":{"tags":["Consent Record"],"summary":"Get the list of signed Consent Records for the input Account Id.","operationId":"getConsentRecordsByAccountId","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the list of signed Consent Records belonging to the input Account Id.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ConsentRecordSigned"}}}}}}},"delete":{"tags":["Consent Record"],"summary":"Delete all the Consent Records Signed for the Account Id in input.","operationId":"deleteConsentRecordsByAccountId","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}},{"name":"deleteConsentForms","in":"query","required":false,"schema":{"type":"boolean","default":true}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"204":{"description":"Returns No Content.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ConsentRecordSigned"}}}}}}},"/api/v2/accounts/{accountId}/consents/pair":{"get":{"tags":["Consent Record"],"summary":"Get the list of paired (sink, source) signed Consent Records for the input Account Id.","operationId":"getConsentRecordPairsByAccountId","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}},{"name":"consentId","in":"query","required":false,"schema":{"type":"string"}},{"name":"serviceId","in":"query","required":false,"schema":{"type":"string"}},{"name":"status","in":"query","required":false,"schema":{"type":"string","enum":["Active","Disabled","Withdrawn"]}},{"name":"purposeCategory","in":"query","required":false,"schema":{"type":"string"}},{"name":"processingCategory","in":"query","required":false,"schema":{"type":"string","enum":["Aggregate","Analyse","Anonymize","Collect","Copy","Derive","Move","Query","Transfer"]}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the list of pairs of signed Consent Records belonging to the input Account Id.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ConsentRecordSignedPair"}}}}}}}},"/api/v2/accounts/{accountId}/consents/{consentId}":{"get":{"tags":["Consent Record"],"summary":"Get the list of signed Consent Records for the input Account Id and Consent Record Id.","operationId":"getConsentRecordByAccountIdAndCrId","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}},{"name":"consentId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the list of signed Consent Records belonging to the input Account Id and with input CrId.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentRecordSigned"}}}}}}},"/api/v2/services/{serviceId}/consents":{"get":{"tags":["Consent Record"],"summary":"Get the list of signed Consent Records for the input Service Id.","operationId":"getConsentRecordsByServiceId","parameters":[{"name":"serviceId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the list of signed Consent Records belonging to the Users linked with the input Service Id.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ConsentRecordSigned"}}}}}}}},"/api/v2/auth_token/{cr_id}":{"get":{"tags":["Consenting"],"summary":"Get the AuthorisationToken used by Sink service in the data requests.","operationId":"getAuthorisationToken","parameters":[{"name":"cr_id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"default":{"description":"Returns the AuthorisationToken signed with the Operator private key","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorisationTokenResponse"}}}}}}},"/api/v2/users/{surrogateId}/consentForms":{"delete":{"tags":["Consent Record"],"summary":"Delete all the Consent Records Signed for the Account Id in input.","operationId":"deleteConsentFormsBySurrogateId","parameters":[{"name":"surrogateId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"204":{"description":"Returns No Content.","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/v2/users/{surrogateId}/consents/{crId}/pair":{"get":{"tags":["Consent Record"],"summary":"Get the signed Consent Record Pair for the input SurrogateId and CrId.","operationId":"getConsentRecordPairBySurrogateIdAndConsentRecordId","parameters":[{"name":"surrogateId","in":"path","required":true,"schema":{"type":"string"}},{"name":"crId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the signed Consent Record pair belonging to the input Surrogate Id and with Cr Id.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentRecordSignedPair"}}}}}}},"/api/v2/users/{surrogateId}/consents/{crId}":{"get":{"tags":["Consent Record"],"summary":"Get the signed Consent Record for the input SurrogateId and CrId.","operationId":"getConsentRecordBySurrogateIdAndConsentRecordId","parameters":[{"name":"surrogateId","in":"path","required":true,"schema":{"type":"string"}},{"name":"crId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the signed Consent Record belonging to the input Account Id  and SlrId (for service linked and actin in the consent either as sink or source).","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentRecordSigned"}}}}}}},"/api/v2/users/{surrogateId}/servicelinks/{slrId}/consents/pair":{"get":{"tags":["Consent Record"],"summary":"Get the list of paired (sink, source) signed Consent Records for the input Account Id and SlrId.","operationId":"getConsentRecordPairsBySurrogateIdAndSlrId","parameters":[{"name":"surrogateId","in":"path","required":true,"schema":{"type":"string"}},{"name":"slrId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the list of pairs of signed Consent Records belonging to the input Account Id and and SlrId (for service linked and actin in the consent either as sink or source).","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ConsentRecordSignedPair"}}}}}}}},"/api/v2/services/consents":{"get":{"tags":["Consent Record"],"summary":"Get the list of signed Consent Records for the input Service Provider Business Id.","operationId":"getConsentRecordsByServiceProviderBusinessId","parameters":[{"name":"businessId","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the list of signed Consent Records belonging to the Users linked with services provided by the input Business Id.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ConsentRecordSigned"}}}}}}}},"/api/v2/accounts/{accountId}/servicelinks/{slrId}/consents/pair":{"get":{"tags":["Consent Record"],"summary":"Get the list of paired (sink, source) signed Consent Records for the input Account Id and SlrId.","operationId":"getConsentRecordPairsByAccountIdAndSlrId","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}},{"name":"slrId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the list of pairs of signed Consent Records belonging to the input Account Id and and SlrId (for service linked and actin in the consent either as sink or source).","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ConsentRecordSignedPair"}}}}}}}},"/api/v2/users/{surrogateId}/purpose/{purposeId}/consents":{"get":{"tags":["Consent Record"],"summary":"Get the list of signed Consent Records for the input Surrogate Id.","operationId":"getConsentRecordsBySurrogateIdAndPurposeId","parameters":[{"name":"surrogateId","in":"path","required":true,"schema":{"type":"string"}},{"name":"purposeId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the list of signed Consent Records belonging to the User linked with the input Surrogate Id and Purpose Id.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ConsentRecordSigned"}}}}}}}},"/api/v2/accounts/{accountId}/servicelinks/{slrId}":{"get":{"tags":["Consent Record"],"summary":"Get the list of signed Consent Records for the input Account Id and Service Link Record Id.","operationId":"getConsentRecordsByAccountIdAndSlrId","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}},{"name":"slrId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the list of signed Consent Records belonging to the input Account Id and with input Slr Id.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ConsentRecordSigned"}}}}}}}},"/api/v2/accounts/{accountId}/servicelinks/{slrId}/consents/{crId}/statuses/":{"get":{"tags":["Consent Record"],"summary":"Get the list of signed Consent Status Records for the input Account Id, Slr Id and Cr Id.","operationId":"getConsentStatusRecordsByAccountIdAndSlrIdAndCrId","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}},{"name":"slrId","in":"path","required":true,"schema":{"type":"string"}},{"name":"crId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the list of signed Consent Status Records belonging to the input Account Id, Slr Id and Cr Id.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ConsentStatusRecordSigned"}}}}}}}},"/api/v2/accounts/{accountId}/servicelinks/{slrId}/consents/{crId}/statuses/last":{"get":{"tags":["Consent Record"],"summary":"Get the last signed Consent Status Records for the input Account Id, Slr Id and Cr Id.","operationId":"getLastConsentStatusRecordByAccountIdAndSlrIdAndCrId","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}},{"name":"slrId","in":"path","required":true,"schema":{"type":"string"}},{"name":"crId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the last signed Consent Status Records belonging to the input Account Id, Slr Id and Cr Id.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentStatusRecordSigned"}}}}}}},"/api/v2/accounts/{accountId}/servicelinks/{slrId}/consents/{crId}/statuses/{recordId}":{"get":{"tags":["Consent Record"],"summary":"Get the list of signed Consent Status Records for the input Account Id, Slr Id and Cr Id.","operationId":"getConsentStatusRecordByAccountIdAndSlrIdAndCrIdAndRecordId","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}},{"name":"slrId","in":"path","required":true,"schema":{"type":"string"}},{"name":"crId","in":"path","required":true,"schema":{"type":"string"}},{"name":"recordId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the list of signed Consent Status Records belonging to the input Account Id, Slr Id and Cr Id.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentStatusRecordSigned"}}}}}}}},"components":{"schemas":{"ApiSubError":{"required":["type"],"type":"object","properties":{"type":{"type":"string"}},"discriminator":{"propertyName":"type"}},"ErrorResponse":{"type":"object","properties":{"status":{"type":"string","enum":["100 CONTINUE","101 SWITCHING_PROTOCOLS","102 PROCESSING","103 CHECKPOINT","200 OK","201 CREATED","202 ACCEPTED","203 NON_AUTHORITATIVE_INFORMATION","204 NO_CONTENT","205 RESET_CONTENT","206 PARTIAL_CONTENT","207 MULTI_STATUS","208 ALREADY_REPORTED","226 IM_USED","300 MULTIPLE_CHOICES","301 MOVED_PERMANENTLY","302 FOUND","302 MOVED_TEMPORARILY","303 SEE_OTHER","304 NOT_MODIFIED","305 USE_PROXY","307 TEMPORARY_REDIRECT","308 PERMANENT_REDIRECT","400 BAD_REQUEST","401 UNAUTHORIZED","402 PAYMENT_REQUIRED","403 FORBIDDEN","404 NOT_FOUND","405 METHOD_NOT_ALLOWED","406 NOT_ACCEPTABLE","407 PROXY_AUTHENTICATION_REQUIRED","408 REQUEST_TIMEOUT","409 CONFLICT","410 GONE","411 LENGTH_REQUIRED","412 PRECONDITION_FAILED","413 PAYLOAD_TOO_LARGE","413 REQUEST_ENTITY_TOO_LARGE","414 URI_TOO_LONG","414 REQUEST_URI_TOO_LONG","415 UNSUPPORTED_MEDIA_TYPE","416 REQUESTED_RANGE_NOT_SATISFIABLE","417 EXPECTATION_FAILED","418 I_AM_A_TEAPOT","419 INSUFFICIENT_SPACE_ON_RESOURCE","420 METHOD_FAILURE","421 DESTINATION_LOCKED","422 UNPROCESSABLE_ENTITY","423 LOCKED","424 FAILED_DEPENDENCY","425 TOO_EARLY","426 UPGRADE_REQUIRED","428 PRECONDITION_REQUIRED","429 TOO_MANY_REQUESTS","431 REQUEST_HEADER_FIELDS_TOO_LARGE","451 UNAVAILABLE_FOR_LEGAL_REASONS","500 INTERNAL_SERVER_ERROR","501 NOT_IMPLEMENTED","502 BAD_GATEWAY","503 SERVICE_UNAVAILABLE","504 GATEWAY_TIMEOUT","505 HTTP_VERSION_NOT_SUPPORTED","506 VARIANT_ALSO_NEGOTIATES","507 INSUFFICIENT_STORAGE","508 LOOP_DETECTED","509 BANDWIDTH_LIMIT_EXCEEDED","510 NOT_EXTENDED","511 NETWORK_AUTHENTICATION_REQUIRED"]},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"debugMessage":{"type":"string"},"cause":{"type":"string"},"subErrors":{"type":"array","items":{"$ref":"#/components/schemas/ApiSubError"}}}},"Algorithm":{"type":"object","properties":{"name":{"type":"string"},"requirement":{"type":"string","enum":["REQUIRED","RECOMMENDED","OPTIONAL"]}}},"Base64":{"type":"object"},"Base64URL":{"type":"object"},"CommonPart":{"required":["consent_status","cr_id","data_controller","iat","jurisdiction","mat","operator","role","rs_description","service_description_signature","service_description_version","service_provider_business_id","slr_id","source_id","source_name","subject_humanreadable_descriptions","subject_id","subject_name","surrogate_id","version"],"type":"object","properties":{"iat":{"type":"string","format":"date-time"},"mat":{"type":"string","format":"date-time"},"nbf":{"type":"string","format":"date-time"},"exp":{"type":"string","format":"date-time"},"operator":{"type":"string"},"jurisdiction":{"type":"string"},"role":{"type":"string","enum":["Sink","Source"]},"version":{"type":"string"},"cr_id":{"type":"string"},"cr_pair_id":{"type":"string"},"surrogate_id":{"type":"string"},"rs_description":{"$ref":"#/components/schemas/RSDescription"},"slr_id":{"type":"string"},"source_id":{"type":"string"},"source_name":{"type":"string"},"subject_id":{"type":"string"},"subject_name":{"type":"string"},"subject_humanreadable_descriptions":{"type":"array","items":{"$ref":"#/components/schemas/HumanReadableDescription"}},"data_controller":{"$ref":"#/components/schemas/DataController"},"service_description_version":{"type":"string"},"service_description_signature":{"type":"string"},"service_provider_business_id":{"type":"string"},"consent_status":{"type":"string","enum":["Active","Disabled","Withdrawn"]},"consent_statuses_signature":{"$ref":"#/components/schemas/Base64URL"}}},"ConsentNotarizationPart":{"type":"object","properties":{"notarizationStatus":{"type":"boolean"},"notarizationHash":{"type":"string"},"notarizationTimestamp":{"type":"string","format":"date-time"}}},"ConsentRecordPayload":{"type":"object","properties":{"consentNotarization":{"$ref":"#/components/schemas/ConsentNotarizationPart"},"common_part":{"$ref":"#/components/schemas/CommonPart"},"role_specific_part":{"$ref":"#/components/schemas/ConsentRecordRoleSpecificPart"}}},"ConsentRecordRoleSpecificPart":{"required":["type"],"type":"object","properties":{"type":{"type":"string"}},"discriminator":{"propertyName":"type"}},"ConsentRecordSigned":{"required":["header","payload","protected","signature"],"type":"object","properties":{"header":{"$ref":"#/components/schemas/JWSHeader"},"payload":{"$ref":"#/components/schemas/ConsentRecordPayload"},"signature":{"$ref":"#/components/schemas/Base64URL"},"consentStatusList":{"type":"array","items":{"$ref":"#/components/schemas/ConsentStatusRecordSigned"}},"protected":{"$ref":"#/components/schemas/Base64URL"}}},"ConsentStatusRecordPayload":{"required":["consent_status","cr_id","iat","prev_record_id","record_id","surrogate_id","version"],"type":"object","properties":{"record_id":{"type":"string"},"version":{"type":"string"},"surrogate_id":{"type":"string"},"cr_id":{"type":"string"},"consent_status":{"type":"string","enum":["Active","Disabled","Withdrawn"]},"consent_resource_set":{"$ref":"#/components/schemas/ResourceSet"},"consent_usage_rules":{"$ref":"#/components/schemas/SinkUsageRules"},"iat":{"type":"string","format":"date-time"},"prev_record_id":{"type":"string"}}},"ConsentStatusRecordSigned":{"required":["header","payload","protected","signature"],"type":"object","properties":{"header":{"$ref":"#/components/schemas/JWSHeader"},"payload":{"$ref":"#/components/schemas/ConsentStatusRecordPayload"},"signature":{"$ref":"#/components/schemas/Base64URL"},"protected":{"$ref":"#/components/schemas/Base64URL"}}},"DataController":{"type":"object","properties":{"piiController":{"type":"string"},"onBehalf":{"type":"boolean"},"org":{"type":"string"},"contact":{"type":"string"},"address":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"operatorName":{"type":"string"}}},"DataMapping":{"type":"object","properties":{"property":{"type":"string"},"conceptId":{"type":"string"},"name":{"type":"string"},"type":{"type":"string"},"required":{"type":"boolean"}}},"Dataset":{"required":["created","dataMappings","dataset_id","purposeId","purposeName"],"type":"object","properties":{"contactPoint":{"type":"string"},"description":{"type":"string"},"issued":{"type":"string"},"keyword":{"type":"array","items":{"type":"string"}},"purposeId":{"type":"string"},"language":{"type":"string"},"modified":{"type":"string"},"publisher":{"type":"string"},"serviceDataType":{"type":"string"},"spatial":{"type":"string"},"title":{"type":"string"},"dataStructureSpecification":{"type":"string"},"dataMappings":{"type":"array","items":{"$ref":"#/components/schemas/DataMapping"}},"created":{"type":"string","format":"date-time"},"dataset_id":{"type":"string"},"purposeName":{"type":"string"}}},"Description__2":{"type":"object","properties":{"locale":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"descriptionUrl":{"type":"string"},"iconUrl":{"type":"string"}}},"HumanReadableDescription":{"type":"object","properties":{"locale":{"type":"string"},"description":{"type":"string"},"keywords":{"type":"array","items":{"type":"string"}}}},"JOSEObjectType":{"type":"object","properties":{"type":{"type":"string"}}},"JWK":{"type":"object","properties":{"keyStore":{"type":"object","properties":{"type":{"type":"string"},"provider":{"type":"object","additionalProperties":{"type":"string"}}}},"private":{"type":"boolean"},"algorithm":{"$ref":"#/components/schemas/Algorithm"},"keyID":{"type":"string"},"keyUse":{"$ref":"#/components/schemas/KeyUse"},"keyType":{"$ref":"#/components/schemas/KeyType"},"parsedX509CertChain":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string"},"subjectX500Principal":{"type":"object","properties":{"name":{"type":"string"},"encoded":{"type":"array","items":{"type":"string","format":"byte"}}}},"issuerX500Principal":{"type":"object","properties":{"name":{"type":"string"},"encoded":{"type":"array","items":{"type":"string","format":"byte"}}}},"signature":{"type":"array","items":{"type":"string","format":"byte"}},"basicConstraints":{"type":"integer","format":"int32"},"version":{"type":"integer","format":"int32"},"issuerDN":{"type":"object","properties":{"name":{"type":"string"}}},"subjectDN":{"type":"object","properties":{"name":{"type":"string"}}},"serialNumber":{"type":"integer"},"tbscertificate":{"type":"array","items":{"type":"string","format":"byte"}},"extendedKeyUsage":{"type":"array","items":{"type":"string"}},"sigAlgName":{"type":"string"},"notBefore":{"type":"string","format":"date-time"},"notAfter":{"type":"string","format":"date-time"},"subjectAlternativeNames":{"type":"array","items":{"type":"array","items":{"type":"object"}}},"issuerAlternativeNames":{"type":"array","items":{"type":"array","items":{"type":"object"}}},"sigAlgParams":{"type":"array","items":{"type":"string","format":"byte"}},"sigAlgOID":{"type":"string"},"issuerUniqueID":{"type":"array","items":{"type":"boolean"}},"subjectUniqueID":{"type":"array","items":{"type":"boolean"}},"keyUsage":{"type":"array","items":{"type":"boolean"}},"criticalExtensionOIDs":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"nonCriticalExtensionOIDs":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"encoded":{"type":"array","items":{"type":"string","format":"byte"}},"publicKey":{"type":"object","properties":{"encoded":{"type":"array","items":{"type":"string","format":"byte"}},"format":{"type":"string"},"algorithm":{"type":"string"}}}}}},"x509CertThumbprint":{"$ref":"#/components/schemas/Base64URL"},"x509CertSHA256Thumbprint":{"$ref":"#/components/schemas/Base64URL"},"requiredParams":{"type":"object","additionalProperties":{"type":"object"}},"keyOperations":{"uniqueItems":true,"type":"array","items":{"type":"string","enum":["sign","verify","encrypt","decrypt","wrapKey","unwrapKey","deriveKey","deriveBits"]}},"x509CertChain":{"type":"array","items":{"$ref":"#/components/schemas/Base64"}},"x509CertURL":{"type":"string","format":"uri"}}},"JWSAlgorithm":{"type":"object","properties":{"name":{"type":"string"},"requirement":{"type":"string","enum":["REQUIRED","RECOMMENDED","OPTIONAL"]}}},"JWSHeader":{"type":"object","properties":{"customParams":{"type":"object","additionalProperties":{"type":"object"}},"parsedBase64URL":{"$ref":"#/components/schemas/Base64URL"},"jwk":{"$ref":"#/components/schemas/JWK"},"algorithm":{"$ref":"#/components/schemas/JWSAlgorithm"},"keyID":{"type":"string"},"x509CertThumbprint":{"$ref":"#/components/schemas/Base64URL"},"x509CertSHA256Thumbprint":{"$ref":"#/components/schemas/Base64URL"},"jwkurl":{"type":"string","format":"uri"},"includedParams":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"x509CertChain":{"type":"array","items":{"$ref":"#/components/schemas/Base64"}},"x509CertURL":{"type":"string","format":"uri"},"type":{"$ref":"#/components/schemas/JOSEObjectType"},"contentType":{"type":"string"},"criticalParams":{"uniqueItems":true,"type":"array","items":{"type":"string"}}}},"KeyType":{"type":"object","properties":{"value":{"type":"string"},"requirement":{"type":"string","enum":["REQUIRED","RECOMMENDED","OPTIONAL"]}}},"KeyUse":{"type":"object","properties":{"value":{"type":"string"}}},"Obligation":{"type":"object","properties":{"event":{"type":"string"},"activity":{"type":"string"}}},"Policy":{"type":"object","properties":{"policyRef":{"type":"string"},"policyHash":{"type":"string"},"policyVersion":{"type":"string"}}},"RSDescription":{"required":["resource_set"],"type":"object","properties":{"resource_set":{"$ref":"#/components/schemas/ResourceSet"}}},"ResourceSet":{"required":["datasets","rs_id"],"type":"object","properties":{"rs_id":{"type":"string"},"datasets":{"type":"array","items":{"$ref":"#/components/schemas/Dataset"}}}},"ShareWith":{"type":"object","properties":{"orgName":{"type":"string"},"orgUrl":{"type":"string"},"businessType":{"type":"string","enum":["Profit","No profit"]},"required":{"type":"boolean"}}},"SinkUsageRules":{"required":["legalBasis","policy","processingCategories","purposeCategory","purposeDescription","purposeId","purposeName"],"type":"object","properties":{"purposeId":{"type":"string"},"purposeCategory":{"type":"string"},"purposeDescription":{"type":"array","items":{"$ref":"#/components/schemas/Description__2"}},"legalBasis":{"type":"string","enum":["Consent","Contract","Legal obligation","Vital interest","Public interest","Legitimate interest"]},"purposeName":{"type":"string"},"processingCategories":{"type":"array","items":{"type":"string","enum":["Aggregate","Analyse","Anonymize","Collect","Copy","Derive","Move","Query","Transfer"]}},"policy":{"$ref":"#/components/schemas/Policy"},"storage":{"$ref":"#/components/schemas/Storage"},"recipients":{"type":"array","items":{"type":"string","enum":["Ours","Delivery","Same","Other recipient","Unrelated","Public"]}},"shareWith":{"type":"array","items":{"$ref":"#/components/schemas/ShareWith"}},"obligations":{"type":"array","items":{"$ref":"#/components/schemas/Obligation"}},"collectionMethod":{"type":"string"},"termination":{"type":"string"}}},"Storage":{"type":"object","properties":{"location":{"type":"string","enum":["Controller servers","Eu","Third countries","Our servers","Processor servers","Third party"]},"duration":{"type":"string","enum":["Business practices","Legal requirement","Stated purpose","Indefinitely"]}}},"ConsentForm":{"required":["data_controller","resource_set","service_description_signature","service_description_version","service_provider_business_id","sink_name","sink_service_id","surrogate_id","usage_rules"],"type":"object","properties":{"surrogate_id":{"type":"string"},"source_surrogate_id":{"type":"string"},"source_service_id":{"type":"string"},"sink_service_id":{"type":"string"},"source_name":{"type":"string"},"sink_name":{"type":"string"},"source_library_domain_url":{"type":"string"},"sink_library_domain_url":{"type":"string"},"source_humanreadable_descriptions":{"type":"array","items":{"$ref":"#/components/schemas/HumanReadableDescription"}},"sink_humanreadable_descriptions":{"type":"array","items":{"$ref":"#/components/schemas/HumanReadableDescription"}},"resource_set":{"$ref":"#/components/schemas/ResourceSet"},"usage_rules":{"$ref":"#/components/schemas/SinkUsageRules"},"jurisdiction":{"type":"string"},"data_controller":{"$ref":"#/components/schemas/DataController"},"service_description_version":{"type":"string"},"service_description_signature":{"type":"string"},"service_provider_business_id":{"type":"string"}}},"ChangeConsentStatusRequest":{"required":["request_from","resource_set","usage_rules"],"type":"object","properties":{"status":{"type":"string","enum":["Active","Disabled","Withdrawn"]},"resource_set":{"$ref":"#/components/schemas/ResourceSet"},"usage_rules":{"$ref":"#/components/schemas/SinkUsageRules"},"request_from":{"type":"string","enum":["Service","Operator"]}}},"ConsentRecordSignedPair":{"required":["sink"],"type":"object","properties":{"sink":{"$ref":"#/components/schemas/ConsentRecordSigned"},"source":{"$ref":"#/components/schemas/ConsentRecordSigned"}}},"AuthorisationTokenResponse":{"required":["auth_token","cr_id"],"type":"object","properties":{"cr_id":{"type":"string"},"auth_token":{"type":"string"}}}},"securitySchemes":{"bearer-key":{"type":"http","scheme":"bearer","bearerFormat":"token"}}}}