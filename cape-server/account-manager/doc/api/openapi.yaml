{"openapi":"3.0.1","info":{"title":"CaPe API - Account Manager","description":"CaPe APIs used to manage CaPe Account, Service Link Records and Service Linking internal operations","version":"2.0"},"servers":[{"url":"http://localhost:8080/account-manager","description":"Generated server url"}],"security":[{"bearer-key":[]}],"tags":[{"name":"Account","description":"Account Manager APIs to manage CaPe Account."},{"name":"Service Link Record","description":"Account Manager APIs to manage Service Link Records."},{"name":"Service Linking","description":"Account Manager APIs to handle Service Linking internal operations."}],"paths":{"/api/v2/idm/auth/external_logout":{"delete":{"tags":["account-controller"],"operationId":"externalLogout","parameters":[{"name":"client_id","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"default response","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/v2/accounts/{accountId}/info":{"get":{"tags":["Account"],"summary":"Return CaPe Account info by Account Id or username.","operationId":"getAccountInfo","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the CaPe Account info.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountInfo"}}}}}},"put":{"tags":["Account"],"summary":"Update CaPe Account Info by Account Id or username","operationId":"updateAccountInfo","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountInfo"}}},"required":true},"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the updated Account info.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountInfo"}}}}}}},"/api/v2/accounts/{accountId}":{"get":{"tags":["Account"],"summary":"Get CaPe Account by Account Id or username.","operationId":"getAccount","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the requested Account.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Account"}}}}}},"put":{"tags":["Account"],"summary":"Update CaPe Account basic fields (accountInfo, language, notification) by Account Id or username","operationId":"updateAccount","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Account"}}},"required":true},"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the updated Account.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountInfo"}}}}}},"delete":{"tags":["Account"],"summary":"Delete CaPe Account by Id or Username.","operationId":"deleteAccount","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"204":{"description":"Returns No Content.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Account"}}}}}}},"/api/v2/idm/oauth2/token":{"post":{"tags":["account-controller"],"operationId":"postCodeforToken","parameters":[{"name":"grant_type","in":"query","required":true,"schema":{"type":"string"}},{"name":"redirect_uri","in":"query","required":true,"schema":{"type":"string"}},{"name":"code","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"default response","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/v2/idm/user":{"get":{"tags":["account-controller"],"operationId":"getIdmUserDetails","parameters":[{"name":"token","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"default response","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/v2/accounts/{accountId}/export":{"get":{"tags":["Account"],"summary":"Export CaPe Account by Account Id or username.","operationId":"exportAccount","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the exported Account.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountExport"}}}}}}},"/api/v2/accounts":{"post":{"tags":["Account"],"summary":"Create a new CaPe Account.","operationId":"createAccount","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Account"}}},"required":true},"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"201":{"description":"Returns 201 Created with the created Account.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Account"}}}}}}},"/api/v2/users/{surrogateId}/servicelink/{slrId}":{"get":{"tags":["Service Link Record"],"summary":"Return the AccountId (username) associated to the input Service Link Record Id and Surrogate Id.","operationId":"getAccountIdFromSlrIdAndSurrogateId","parameters":[{"name":"surrogateId","in":"path","required":true,"schema":{"type":"string"}},{"name":"slrId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the Last Service Link Record Status.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceLinkStatusRecordSigned"}}}}}}},"/api/v2/accounts/{accountId}/services/{serviceId}/servicelink":{"get":{"tags":["Service Link Record"],"summary":"Return Service Link Record by Account Id or username and Service Id.","operationId":"getServiceLinkByAccountIdOrUsernameAndServiceId","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}},{"name":"serviceId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the Service Link Record.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceLinkRecordDoubleSigned"}}}}}}},"/api/v2/users/{surrogateId}/services/{serviceId}/servicelink":{"get":{"tags":["Service Link Record"],"summary":"Return Service Link Record by SurrogateId and Service Id.","operationId":"getServiceLinkRecordBySurrogateIdAndServiceId","parameters":[{"name":"surrogateId","in":"path","required":true,"schema":{"type":"string"}},{"name":"serviceId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the Service Link Record.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceLinkRecordDoubleSigned"}}}}}}},"/api/v2/accounts/{accountId}/serviceLinks/{slrId}/statuses":{"get":{"tags":["Service Link Record"],"summary":"Return Service Link Record Statuses by Account Id or username and Slr Id.","operationId":"getServiceLinkStatusRecords","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}},{"name":"slrId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the CaPe Account info.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ServiceLinkStatusRecordSigned"}}}}}}}},"/api/v2/users/{surrogateId}/servicelink":{"get":{"tags":["Service Link Record"],"summary":"Return Service Link Record by SurrogateId Id.","operationId":"getServiceLinkRecordBySurrogateId","parameters":[{"name":"surrogateId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the Service Link Record.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceLinkRecordDoubleSigned"}}}}}}},"/api/v2/accounts/{accountId}/export/download":{"get":{"tags":["Account"],"summary":"Export and download as JSON file the CaPe Account by Account Id or username.","operationId":"exportAndDownloadAccount","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the file with exported Account.","content":{"application/octet-stream":{"schema":{"type":"array","items":{"type":"string","format":"byte"}}}}}}}},"/api/v2/accounts/{accountId}/servicelinks":{"get":{"tags":["Service Link Record"],"summary":"Return Service Link Records by Account Id or username.","operationId":"getServiceLinkRecords","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns Service Link Records.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ServiceLinkRecordDoubleSigned"}}}}}}}},"/api/v2/accounts/{accountId}/servicelinks/{slrId}":{"get":{"tags":["Service Link Record"],"summary":"Return Service Link Record by Account Id or username and Slr Id.","operationId":"getServiceLinkRecord","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}},{"name":"slrId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the Service Link Record.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceLinkRecordDoubleSigned"}}}}}}},"/api/v2/accounts/{accountId}/servicelinks/{slrId}/statuses/last":{"get":{"tags":["Service Link Record"],"summary":"Return the Last Service Link Record Status by Account Id or username and Slr Id.","operationId":"getLastServiceLinkStatusRecord","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}},{"name":"slrId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the Last Service Link Record Status.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceLinkStatusRecordSigned"}}}}}}},"/api/v2/accounts/{accountId}/servicelinks/{slrId}/statuses/{ssrId}":{"get":{"tags":["Service Link Record"],"summary":"Return Service Link Record Status by Account Id or username, Slr Id and Ssr Id.","operationId":"getServiceLinkStatusRecord","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"string"}},{"name":"slrId","in":"path","required":true,"schema":{"type":"string"}},{"name":"ssrId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Returns the Service Link Record Status.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceLinkStatusRecordSigned"}}}}}}},"/api/v2/accounts/{account_id}/servicelinks/{link_id}/store":{"post":{"tags":["Service Linking"],"summary":"Init Service Linking at Account Manager - Source","description":"Stores Service Link ID to Account.","operationId":"storeFinalSlr","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"string"}},{"name":"link_id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FinalStoreSlrRequest"}}},"required":true},"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"302":{"description":"Returns Redirect to Service Login page for authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FinalStoreSlrResponse"}}}}}}},"/api/v2/accounts/{account_id}/servicelinks/{link_id}":{"patch":{"tags":["Service Linking"],"summary":"Sign Service Link.","description":"Signs constructed Service Link Record with Account owner's key.","operationId":"accountSignSlr","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"string"}},{"name":"link_id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountSignSlrRequest"}}},"required":true},"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"302":{"description":"\t\r\nService Link Record and Service Link Status Record created.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountSignSlrResponse"}}}}}}},"/api/v2/accounts/{account_id}/servicelinks/init/source":{"post":{"tags":["Service Linking"],"summary":"Init Service Linking at Account Manager - Source.","description":"Stores Service Link ID to Account.","operationId":"storeSourceSlrId","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SourceServiceLinkInitRequest"}}},"required":true},"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"302":{"description":"Returns Redirect to Service Login page for authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceLinkInitResponse"}}}}}}},"/api/v2/accounts/{account_id}/servicelinks/init/sink":{"post":{"tags":["Service Linking"],"summary":"Init Service Linking at Account Manager - Sink","description":"Stores Service Link ID to Account with PoP Key.","operationId":"storeSinkSlrId","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SinkServiceLinkInitRequest"}}},"required":true},"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"302":{"description":"Returns Redirect to Service Login page for authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceLinkInitResponse"}}}}}}},"/api/v2/users/{surrogate_id}/servicelinks/{link_id}/statuses/storeOnly":{"post":{"tags":["Service Linking"],"summary":"Only store a new Service Link Status Record, already signed by Service Manager.","description":"Store a new Service Link Status Record, already signed by Service Manager with the Operator's private key.","operationId":"storeSignedServiceLinkStatus","parameters":[{"name":"surrogate_id","in":"path","required":true,"schema":{"type":"string"}},{"name":"link_id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceLinkStatusRecordSigned"}}},"required":true},"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"201":{"description":"Returns the stored Service Link Status Record.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceLinkStatusRecordSigned"}}}}}}},"/api/v2/users/{surrogate_id}/servicelinks/{link_id}/consents":{"post":{"tags":["Service Linking"],"summary":"Constructs Consent Record's and Consent Status Record's, for consenting a single service, based on provided payloads.","description":"Signs constructed record's with Account owner's key.","operationId":"signWithinServiceConsent","parameters":[{"name":"surrogate_id","in":"path","required":true,"schema":{"type":"string"}},{"name":"link_id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WithinServiceConsentSignRequest"}}},"required":true},"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"201":{"description":"Returns the stored Service Link Status Record.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WithinServiceConsentSignResponse"}}}}}}},"/api/v2/accounts/{account_id}/servicelinks/{link_id}/consents/statuses/list":{"post":{"tags":["Service Linking"],"summary":"Sign input Consent Status Record List.","description":"Signs constructed Conssent Status Records List with Account owner's key.","operationId":"signConsentStatusRecordsList","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"string"}},{"name":"link_id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ConsentStatusRecordSigned"}}}},"required":true},"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"201":{"description":"Returns the Base64 Signature Consent Status Records List with the private part of the key pair matching with the input Account Id.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WithinServiceConsentSignResponse"}}}}}}},"/api/v2/users/{surrogate_id}/servicelinks/{sink_link_id}/{source_link_id}/consents":{"post":{"tags":["Service Linking"],"summary":"Constructs Consent Record and Consent Status Record, for consenting a service for third party reuse case, based on provided payloads.","description":"Signs constructed record with Account owner key.","operationId":"signThirdPartyReuseConsent","parameters":[{"name":"surrogate_id","in":"path","required":true,"schema":{"type":"string"}},{"name":"sink_link_id","in":"path","required":true,"schema":{"type":"string"}},{"name":"source_link_id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ThirdPartyReuseConsentSignRequest"}}},"required":true},"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"201":{"description":"Returns the stored Service Link Status Record.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ThirdPartyReuseConsentSignResponse"}}}}}}},"/api/v2/accounts/{account_id}/servicelinks/{link_id}/statuses":{"post":{"tags":["Service Linking"],"summary":"Sign and store a new Service Link Status Record.","description":"Constructs signed Service Link Status Record based on provided Service Link Status Record payload. Signs constructed Service Link Status Record with Account owner's key. Finally Service Link Status Record is stored.","operationId":"signAndStoreServiceLinkStatus","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"string"}},{"name":"link_id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceLinkStatusRecordPayload"}}},"required":true},"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"201":{"description":"Returns the newly signed Service Link Status Record.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceLinkStatusRecordSigned"}}}}}}},"/api/v2/accounts/{account_id}/servicelinks/{link_id}/consents/statuses":{"post":{"tags":["Service Linking"],"summary":"Sign input Consent Status Record Payload.","description":"Signs constructed record's with Account owner's key.","operationId":"signConsentStatusRecord","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"string"}},{"name":"link_id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentStatusRecordPayload"}}},"required":true},"responses":{"500":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"201":{"description":"Returns the Consent Status Record signed with the private part of the key pair matching with the input Account Id.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentStatusRecordSigned"}}}}}}}},"components":{"schemas":{"ApiSubError":{"required":["type"],"type":"object","properties":{"type":{"type":"string"}},"discriminator":{"propertyName":"type"}},"ErrorResponse":{"type":"object","properties":{"status":{"type":"string","enum":["100 CONTINUE","101 SWITCHING_PROTOCOLS","102 PROCESSING","103 CHECKPOINT","200 OK","201 CREATED","202 ACCEPTED","203 NON_AUTHORITATIVE_INFORMATION","204 NO_CONTENT","205 RESET_CONTENT","206 PARTIAL_CONTENT","207 MULTI_STATUS","208 ALREADY_REPORTED","226 IM_USED","300 MULTIPLE_CHOICES","301 MOVED_PERMANENTLY","302 FOUND","302 MOVED_TEMPORARILY","303 SEE_OTHER","304 NOT_MODIFIED","305 USE_PROXY","307 TEMPORARY_REDIRECT","308 PERMANENT_REDIRECT","400 BAD_REQUEST","401 UNAUTHORIZED","402 PAYMENT_REQUIRED","403 FORBIDDEN","404 NOT_FOUND","405 METHOD_NOT_ALLOWED","406 NOT_ACCEPTABLE","407 PROXY_AUTHENTICATION_REQUIRED","408 REQUEST_TIMEOUT","409 CONFLICT","410 GONE","411 LENGTH_REQUIRED","412 PRECONDITION_FAILED","413 PAYLOAD_TOO_LARGE","413 REQUEST_ENTITY_TOO_LARGE","414 URI_TOO_LONG","414 REQUEST_URI_TOO_LONG","415 UNSUPPORTED_MEDIA_TYPE","416 REQUESTED_RANGE_NOT_SATISFIABLE","417 EXPECTATION_FAILED","418 I_AM_A_TEAPOT","419 INSUFFICIENT_SPACE_ON_RESOURCE","420 METHOD_FAILURE","421 DESTINATION_LOCKED","422 UNPROCESSABLE_ENTITY","423 LOCKED","424 FAILED_DEPENDENCY","425 TOO_EARLY","426 UPGRADE_REQUIRED","428 PRECONDITION_REQUIRED","429 TOO_MANY_REQUESTS","431 REQUEST_HEADER_FIELDS_TOO_LARGE","451 UNAVAILABLE_FOR_LEGAL_REASONS","500 INTERNAL_SERVER_ERROR","501 NOT_IMPLEMENTED","502 BAD_GATEWAY","503 SERVICE_UNAVAILABLE","504 GATEWAY_TIMEOUT","505 HTTP_VERSION_NOT_SUPPORTED","506 VARIANT_ALSO_NEGOTIATES","507 INSUFFICIENT_STORAGE","508 LOOP_DETECTED","509 BANDWIDTH_LIMIT_EXCEEDED","510 NOT_EXTENDED","511 NETWORK_AUTHENTICATION_REQUIRED"]},"timestamp":{"type":"string","format":"date-time"},"message":{"type":"string"},"debugMessage":{"type":"string"},"cause":{"type":"string"},"subErrors":{"type":"array","items":{"$ref":"#/components/schemas/ApiSubError"}}}},"AccountInfo":{"type":"object","properties":{"firstname":{"type":"string"},"lastname":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"}}},"Account":{"required":["username"],"type":"object","properties":{"activated":{"type":"boolean"},"created":{"type":"string","format":"date-time"},"modified":{"type":"string","format":"date-time"},"username":{"type":"string"},"language":{"type":"object","properties":{"language":{"type":"string"},"script":{"type":"string"},"country":{"type":"string"},"variant":{"type":"string"},"unicodeLocaleAttributes":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"unicodeLocaleKeys":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"displayLanguage":{"type":"string"},"displayScript":{"type":"string"},"displayCountry":{"type":"string"},"displayVariant":{"type":"string"},"displayName":{"type":"string"},"extensionKeys":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"iso3Language":{"type":"string"},"iso3Country":{"type":"string"}}},"notification":{"type":"array","items":{"type":"string","enum":["Dashboard","Email","Phone"]}},"keyPair":{"$ref":"#/components/schemas/RSAKey"},"account_info":{"$ref":"#/components/schemas/AccountInfo"}}},"Algorithm":{"type":"object","properties":{"name":{"type":"string"},"requirement":{"type":"string","enum":["REQUIRED","RECOMMENDED","OPTIONAL"]}}},"Base64":{"type":"object"},"Base64URL":{"type":"object"},"KeyType":{"type":"object","properties":{"value":{"type":"string"},"requirement":{"type":"string","enum":["REQUIRED","RECOMMENDED","OPTIONAL"]}}},"KeyUse":{"type":"object","properties":{"value":{"type":"string"}}},"OtherPrimesInfo":{"type":"object","properties":{"factorCRTExponent":{"$ref":"#/components/schemas/Base64URL"},"factorCRTCoefficient":{"$ref":"#/components/schemas/Base64URL"},"primeFactor":{"$ref":"#/components/schemas/Base64URL"}}},"RSAKey":{"type":"object","properties":{"keyStore":{"type":"object","properties":{"type":{"type":"string"},"provider":{"type":"object","additionalProperties":{"type":"string"}}}},"private":{"type":"boolean"},"publicExponent":{"$ref":"#/components/schemas/Base64URL"},"modulus":{"$ref":"#/components/schemas/Base64URL"},"secondPrimeFactor":{"$ref":"#/components/schemas/Base64URL"},"firstCRTCoefficient":{"$ref":"#/components/schemas/Base64URL"},"firstPrimeFactor":{"$ref":"#/components/schemas/Base64URL"},"firstFactorCRTExponent":{"$ref":"#/components/schemas/Base64URL"},"secondFactorCRTExponent":{"$ref":"#/components/schemas/Base64URL"},"privateExponent":{"$ref":"#/components/schemas/Base64URL"},"otherPrimes":{"type":"array","items":{"$ref":"#/components/schemas/OtherPrimesInfo"}},"requiredParams":{"type":"object","additionalProperties":{"type":"object"}},"keyType":{"$ref":"#/components/schemas/KeyType"},"keyUse":{"$ref":"#/components/schemas/KeyUse"},"keyID":{"type":"string"},"x509CertSHA256Thumbprint":{"$ref":"#/components/schemas/Base64URL"},"x509CertThumbprint":{"$ref":"#/components/schemas/Base64URL"},"parsedX509CertChain":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string"},"subjectX500Principal":{"type":"object","properties":{"name":{"type":"string"},"encoded":{"type":"array","items":{"type":"string","format":"byte"}}}},"issuerX500Principal":{"type":"object","properties":{"name":{"type":"string"},"encoded":{"type":"array","items":{"type":"string","format":"byte"}}}},"signature":{"type":"array","items":{"type":"string","format":"byte"}},"basicConstraints":{"type":"integer","format":"int32"},"version":{"type":"integer","format":"int32"},"issuerDN":{"type":"object","properties":{"name":{"type":"string"}}},"subjectDN":{"type":"object","properties":{"name":{"type":"string"}}},"extendedKeyUsage":{"type":"array","items":{"type":"string"}},"subjectAlternativeNames":{"type":"array","items":{"type":"array","items":{"type":"object"}}},"issuerAlternativeNames":{"type":"array","items":{"type":"array","items":{"type":"object"}}},"sigAlgName":{"type":"string"},"sigAlgParams":{"type":"array","items":{"type":"string","format":"byte"}},"tbscertificate":{"type":"array","items":{"type":"string","format":"byte"}},"serialNumber":{"type":"integer"},"notBefore":{"type":"string","format":"date-time"},"notAfter":{"type":"string","format":"date-time"},"sigAlgOID":{"type":"string"},"issuerUniqueID":{"type":"array","items":{"type":"boolean"}},"subjectUniqueID":{"type":"array","items":{"type":"boolean"}},"keyUsage":{"type":"array","items":{"type":"boolean"}},"criticalExtensionOIDs":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"nonCriticalExtensionOIDs":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"encoded":{"type":"array","items":{"type":"string","format":"byte"}},"publicKey":{"type":"object","properties":{"encoded":{"type":"array","items":{"type":"string","format":"byte"}},"format":{"type":"string"},"algorithm":{"type":"string"}}}}}},"x509CertChain":{"type":"array","items":{"$ref":"#/components/schemas/Base64"}},"keyOperations":{"uniqueItems":true,"type":"array","items":{"type":"string","enum":["sign","verify","encrypt","decrypt","wrapKey","unwrapKey","deriveKey","deriveBits"]}},"x509CertURL":{"type":"string","format":"uri"},"algorithm":{"$ref":"#/components/schemas/Algorithm"}}},"AccountExport":{"type":"object","properties":{"accountInfo":{"$ref":"#/components/schemas/AccountInfo"},"serviceLinks":{"type":"array","items":{"$ref":"#/components/schemas/ServiceLinkRecordDoubleSigned"}},"consentRecords":{"type":"array","items":{"$ref":"#/components/schemas/ConsentRecordSigned"}},"eventLogs":{"type":"array","items":{"$ref":"#/components/schemas/EventLog"}},"auditLog":{"$ref":"#/components/schemas/AuditLog"}}},"AuditDataMapping":{"required":["count"],"type":"object","properties":{"property":{"type":"string"},"conceptId":{"type":"string"},"name":{"type":"string"},"type":{"type":"string"},"required":{"type":"boolean"},"count":{"type":"integer","format":"int32"}}},"AuditLog":{"required":["accountId"],"type":"object","properties":{"accountId":{"type":"string"},"linkedServicesCount":{"type":"integer","format":"int32"},"givenConsentsCount":{"type":"integer","format":"int32"},"totalProcessedPersonalDataCount":{"type":"integer","format":"int32"},"processedPersonalDataCount":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/AuditDataMapping"}},"processingCategoryPersonalData":{"type":"object","additionalProperties":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/AuditDataMapping"}}},"purposeCategoryCount":{"type":"object","additionalProperties":{"type":"integer","format":"int32"}},"legalBasisCount":{"type":"object","additionalProperties":{"type":"integer","format":"int32"}},"storageLocationPersonalData":{"type":"object","additionalProperties":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/AuditDataMapping"}}}}},"CommonPart":{"required":["consent_status","cr_id","data_controller","iat","jurisdiction","mat","operator","role","rs_description","service_description_signature","service_description_version","service_provider_business_id","slr_id","source_id","source_name","subject_humanreadable_descriptions","subject_id","subject_name","surrogate_id","version"],"type":"object","properties":{"iat":{"type":"string","format":"date-time"},"mat":{"type":"string","format":"date-time"},"nbf":{"type":"string","format":"date-time"},"exp":{"type":"string","format":"date-time"},"operator":{"type":"string"},"jurisdiction":{"type":"string"},"role":{"type":"string","enum":["Sink","Source"]},"version":{"type":"string"},"cr_id":{"type":"string"},"cr_pair_id":{"type":"string"},"surrogate_id":{"type":"string"},"rs_description":{"$ref":"#/components/schemas/RSDescription"},"slr_id":{"type":"string"},"source_id":{"type":"string"},"source_name":{"type":"string"},"subject_id":{"type":"string"},"subject_name":{"type":"string"},"subject_humanreadable_descriptions":{"type":"array","items":{"$ref":"#/components/schemas/HumanReadableDescription"}},"data_controller":{"$ref":"#/components/schemas/DataController"},"service_description_version":{"type":"string"},"service_description_signature":{"type":"string"},"service_provider_business_id":{"type":"string"},"consent_status":{"type":"string","enum":["Active","Disabled","Withdrawn"]},"consent_statuses_signature":{"$ref":"#/components/schemas/Base64URL"}}},"ConsentNotarizationPart":{"type":"object","properties":{"notarizationStatus":{"type":"boolean"},"notarizationHash":{"type":"string"},"notarizationTimestamp":{"type":"string","format":"date-time"}}},"ConsentRecordPayload":{"type":"object","properties":{"consentNotarization":{"$ref":"#/components/schemas/ConsentNotarizationPart"},"common_part":{"$ref":"#/components/schemas/CommonPart"},"role_specific_part":{"$ref":"#/components/schemas/ConsentRecordRoleSpecificPart"}}},"ConsentRecordRoleSpecificPart":{"required":["type"],"type":"object","properties":{"type":{"type":"string"}},"discriminator":{"propertyName":"type"}},"ConsentRecordSigned":{"required":["header","payload","protected","signature"],"type":"object","properties":{"header":{"$ref":"#/components/schemas/JWSHeader"},"payload":{"$ref":"#/components/schemas/ConsentRecordPayload"},"signature":{"$ref":"#/components/schemas/Base64URL"},"consentStatusList":{"type":"array","items":{"$ref":"#/components/schemas/ConsentStatusRecordSigned"}},"protected":{"$ref":"#/components/schemas/Base64URL"}}},"ConsentStatusRecordPayload":{"required":["consent_status","cr_id","iat","prev_record_id","record_id","surrogate_id","version"],"type":"object","properties":{"record_id":{"type":"string"},"version":{"type":"string"},"surrogate_id":{"type":"string"},"cr_id":{"type":"string"},"consent_status":{"type":"string","enum":["Active","Disabled","Withdrawn"]},"consent_resource_set":{"$ref":"#/components/schemas/ResourceSet"},"consent_usage_rules":{"$ref":"#/components/schemas/SinkUsageRules"},"iat":{"type":"string","format":"date-time"},"prev_record_id":{"type":"string"}}},"ConsentStatusRecordSigned":{"required":["header","payload","protected","signature"],"type":"object","properties":{"header":{"$ref":"#/components/schemas/JWSHeader"},"payload":{"$ref":"#/components/schemas/ConsentStatusRecordPayload"},"signature":{"$ref":"#/components/schemas/Base64URL"},"protected":{"$ref":"#/components/schemas/Base64URL"}}},"DataController":{"type":"object","properties":{"piiController":{"type":"string"},"onBehalf":{"type":"boolean"},"org":{"type":"string"},"contact":{"type":"string"},"address":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"operatorName":{"type":"string"}}},"DataMapping":{"type":"object","properties":{"property":{"type":"string"},"conceptId":{"type":"string"},"name":{"type":"string"},"type":{"type":"string"},"required":{"type":"boolean"}}},"Dataset":{"required":["created","dataMappings","dataset_id","purposeId"],"type":"object","properties":{"contactPoint":{"type":"string"},"description":{"type":"string"},"issued":{"type":"string"},"keyword":{"type":"array","items":{"type":"string"}},"purposeId":{"type":"string"},"purposeName":{"type":"string"},"language":{"type":"string"},"modified":{"type":"string"},"publisher":{"type":"string"},"serviceDataType":{"type":"string"},"spatial":{"type":"string"},"title":{"type":"string"},"dataStructureSpecification":{"type":"string"},"dataMappings":{"type":"array","items":{"$ref":"#/components/schemas/DataMapping"}},"created":{"type":"string","format":"date-time"},"dataset_id":{"type":"string"}}},"Description__2":{"type":"object","properties":{"locale":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"descriptionUrl":{"type":"string"},"iconUrl":{"type":"string"}}},"EventLog":{"required":["accountId","created","type"],"type":"object","properties":{"get_id":{"$ref":"#/components/schemas/ObjectId"},"created":{"type":"string","format":"date-time"},"type":{"type":"string","enum":["ServiceLink","Consent","DataProcessing"]},"accountId":{"type":"string"},"legalBasis":{"type":"string","enum":["Consent","Contract","Legal obligation","Vital interest","Public interest","Legitimate interest"]},"message":{"type":"string"}},"discriminator":{"propertyName":"type"}},"HumanReadableDescription":{"type":"object","properties":{"locale":{"type":"string"},"description":{"type":"string"},"keywords":{"type":"array","items":{"type":"string"}}}},"JOSEObjectType":{"type":"object","properties":{"type":{"type":"string"}}},"JWK":{"type":"object","properties":{"keyStore":{"type":"object","properties":{"type":{"type":"string"},"provider":{"type":"object","additionalProperties":{"type":"string"}}}},"private":{"type":"boolean"},"keyType":{"$ref":"#/components/schemas/KeyType"},"keyUse":{"$ref":"#/components/schemas/KeyUse"},"keyID":{"type":"string"},"x509CertSHA256Thumbprint":{"$ref":"#/components/schemas/Base64URL"},"x509CertThumbprint":{"$ref":"#/components/schemas/Base64URL"},"parsedX509CertChain":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string"},"subjectX500Principal":{"type":"object","properties":{"name":{"type":"string"},"encoded":{"type":"array","items":{"type":"string","format":"byte"}}}},"issuerX500Principal":{"type":"object","properties":{"name":{"type":"string"},"encoded":{"type":"array","items":{"type":"string","format":"byte"}}}},"signature":{"type":"array","items":{"type":"string","format":"byte"}},"basicConstraints":{"type":"integer","format":"int32"},"version":{"type":"integer","format":"int32"},"issuerDN":{"type":"object","properties":{"name":{"type":"string"}}},"subjectDN":{"type":"object","properties":{"name":{"type":"string"}}},"extendedKeyUsage":{"type":"array","items":{"type":"string"}},"subjectAlternativeNames":{"type":"array","items":{"type":"array","items":{"type":"object"}}},"issuerAlternativeNames":{"type":"array","items":{"type":"array","items":{"type":"object"}}},"sigAlgName":{"type":"string"},"sigAlgParams":{"type":"array","items":{"type":"string","format":"byte"}},"tbscertificate":{"type":"array","items":{"type":"string","format":"byte"}},"serialNumber":{"type":"integer"},"notBefore":{"type":"string","format":"date-time"},"notAfter":{"type":"string","format":"date-time"},"sigAlgOID":{"type":"string"},"issuerUniqueID":{"type":"array","items":{"type":"boolean"}},"subjectUniqueID":{"type":"array","items":{"type":"boolean"}},"keyUsage":{"type":"array","items":{"type":"boolean"}},"criticalExtensionOIDs":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"nonCriticalExtensionOIDs":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"encoded":{"type":"array","items":{"type":"string","format":"byte"}},"publicKey":{"type":"object","properties":{"encoded":{"type":"array","items":{"type":"string","format":"byte"}},"format":{"type":"string"},"algorithm":{"type":"string"}}}}}},"requiredParams":{"type":"object","additionalProperties":{"type":"object"}},"x509CertChain":{"type":"array","items":{"$ref":"#/components/schemas/Base64"}},"keyOperations":{"uniqueItems":true,"type":"array","items":{"type":"string","enum":["sign","verify","encrypt","decrypt","wrapKey","unwrapKey","deriveKey","deriveBits"]}},"x509CertURL":{"type":"string","format":"uri"},"algorithm":{"$ref":"#/components/schemas/Algorithm"}}},"JWSAlgorithm":{"type":"object","properties":{"name":{"type":"string"},"requirement":{"type":"string","enum":["REQUIRED","RECOMMENDED","OPTIONAL"]}}},"JWSHeader":{"type":"object","properties":{"customParams":{"type":"object","additionalProperties":{"type":"object"}},"parsedBase64URL":{"$ref":"#/components/schemas/Base64URL"},"jwk":{"$ref":"#/components/schemas/JWK"},"algorithm":{"$ref":"#/components/schemas/JWSAlgorithm"},"keyID":{"type":"string"},"x509CertSHA256Thumbprint":{"$ref":"#/components/schemas/Base64URL"},"x509CertThumbprint":{"$ref":"#/components/schemas/Base64URL"},"jwkurl":{"type":"string","format":"uri"},"x509CertChain":{"type":"array","items":{"$ref":"#/components/schemas/Base64"}},"x509CertURL":{"type":"string","format":"uri"},"includedParams":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"type":{"$ref":"#/components/schemas/JOSEObjectType"},"criticalParams":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"contentType":{"type":"string"}}},"ObjectId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}}},"Obligation":{"type":"object","properties":{"event":{"type":"string"},"activity":{"type":"string"}}},"Policy":{"type":"object","properties":{"policyRef":{"type":"string"},"policyHash":{"type":"string"},"policyVersion":{"type":"string"}}},"RSDescription":{"required":["resource_set"],"type":"object","properties":{"resource_set":{"$ref":"#/components/schemas/ResourceSet"}}},"ResourceSet":{"required":["datasets","rs_id"],"type":"object","properties":{"rs_id":{"type":"string"},"datasets":{"type":"array","items":{"$ref":"#/components/schemas/Dataset"}}}},"ServiceLinkRecordDoubleSigned":{"required":["payload","signatures"],"type":"object","properties":{"payload":{"$ref":"#/components/schemas/ServiceLinkRecordPayload"},"signatures":{"type":"array","items":{"$ref":"#/components/schemas/ServiceLinkRecordSignature"}},"serviceLinkStatuses":{"type":"array","items":{"$ref":"#/components/schemas/ServiceLinkStatusRecordSigned"}}}},"ServiceLinkRecordPayload":{"required":["iat","link_id","operator_id","operator_key","service_description_version","service_id","service_name","service_uri","surrogate_id","version"],"type":"object","properties":{"iat":{"type":"string","format":"date-time"},"version":{"type":"string"},"link_id":{"type":"string"},"operator_id":{"type":"string"},"service_id":{"type":"string"},"service_uri":{"type":"string"},"service_name":{"type":"string"},"pop_key":{"$ref":"#/components/schemas/ServicePopKey"},"service_description_version":{"type":"string"},"surrogate_id":{"type":"string"},"operator_key":{"$ref":"#/components/schemas/RSAKey"},"cr_keys":{"type":"array","items":{"$ref":"#/components/schemas/RSAKey"}}}},"ServiceLinkRecordSignature":{"required":["header","protected","signature"],"type":"object","properties":{"header":{"$ref":"#/components/schemas/JWSHeader"},"signature":{"$ref":"#/components/schemas/Base64URL"},"protected":{"$ref":"#/components/schemas/Base64URL"}}},"ServiceLinkStatusRecordPayload":{"required":["iat","prev_record_id","record_id","sl_status","slr_id","surrogate_id","version"],"type":"object","properties":{"iat":{"type":"string","format":"date-time"},"version":{"type":"string"},"record_id":{"type":"string"},"surrogate_id":{"type":"string"},"slr_id":{"type":"string"},"sl_status":{"type":"string","enum":["Active","Removed"]},"prev_record_id":{"type":"string"}}},"ServiceLinkStatusRecordSigned":{"required":["header","payload","protected","signature"],"type":"object","properties":{"header":{"$ref":"#/components/schemas/JWSHeader"},"payload":{"$ref":"#/components/schemas/ServiceLinkStatusRecordPayload"},"signature":{"$ref":"#/components/schemas/Base64URL"},"protected":{"$ref":"#/components/schemas/Base64URL"}}},"ServicePopKey":{"required":["jwk","operator_id","service_id","surrogate_id"],"type":"object","properties":{"operator_id":{"type":"string"},"service_id":{"type":"string"},"surrogate_id":{"type":"string"},"jwk":{"$ref":"#/components/schemas/RSAKey"}}},"ShareWith":{"type":"object","properties":{"orgName":{"type":"string"},"orgUrl":{"type":"string"},"businessType":{"type":"string","enum":["Profit","No profit"]},"required":{"type":"boolean"}}},"SinkUsageRules":{"required":["legalBasis","policy","processingCategories","purposeCategory","purposeDescription","purposeId","purposeName"],"type":"object","properties":{"purposeId":{"type":"string"},"purposeCategory":{"type":"string"},"purposeDescription":{"type":"array","items":{"$ref":"#/components/schemas/Description__2"}},"legalBasis":{"type":"string","enum":["Consent","Contract","Legal obligation","Vital interest","Public interest","Legitimate interest"]},"purposeName":{"type":"string"},"processingCategories":{"type":"array","items":{"type":"string","enum":["Acquire","Adapt","Align","Alter","Analyse","Anonymise","AutomatedDecisionMaking","Collect","Combine","Consult","Copy","DataSource","Derive","Destruct","Disclose","DiscloseByTransmission","Disseminate","Erase","EvaluationScoring","InnovativeUseOfNewTechnologies","LargeScaleProcessing","MakeAvailable","MatchingCombining","Move","Obtain","Organise","Profiling","Pseudo-Anonymise","Record","Remove","Restrict","Retrieve","Share","Store","Structure","Systematic Monitoring","Transfer","Transform","Transmit"]}},"policy":{"$ref":"#/components/schemas/Policy"},"storage":{"$ref":"#/components/schemas/Storage"},"recipients":{"type":"array","items":{"type":"string","enum":["Ours","Delivery","Same","Other recipient","Unrelated","Public"]}},"shareWith":{"type":"array","items":{"$ref":"#/components/schemas/ShareWith"}},"obligations":{"type":"array","items":{"$ref":"#/components/schemas/Obligation"}},"collectionMethod":{"type":"string"},"termination":{"type":"string"}}},"Storage":{"type":"object","properties":{"location":{"type":"string","enum":["Controller servers","Eu","Third countries","Our servers","Processor servers","Third party"]},"duration":{"type":"string","enum":["Business practices","Legal requirement","Stated purpose","Indefinitely"]}}},"FinalStoreSlrRequest":{"required":["code","slr","ssr"],"type":"object","properties":{"slr":{"$ref":"#/components/schemas/ServiceLinkRecordDoubleSigned"},"ssr":{"$ref":"#/components/schemas/ServiceLinkStatusRecordPayload"},"code":{"type":"string"}}},"FinalStoreSlrResponse":{"required":["code","data"],"type":"object","properties":{"code":{"type":"string"},"data":{"$ref":"#/components/schemas/LinkingResponseData"}}},"LinkingResponseData":{"required":["slr","ssr"],"type":"object","properties":{"slr":{"$ref":"#/components/schemas/ServiceLinkRecordDoubleSigned"},"ssr":{"$ref":"#/components/schemas/ServiceLinkStatusRecordSigned"}}},"AccountSignSlrRequest":{"required":["code","partial_slr_payload"],"type":"object","properties":{"code":{"type":"string"},"partial_slr_payload":{"$ref":"#/components/schemas/ServiceLinkRecordPayload"}}},"AccountSignSlrResponse":{"required":["account_signed_slr","code"],"type":"object","properties":{"code":{"type":"string"},"account_signed_slr":{"$ref":"#/components/schemas/ServiceLinkRecordAccountSigned"}}},"ServiceLinkRecordAccountSigned":{"required":["header","payload","protected","signature"],"type":"object","properties":{"payload":{"$ref":"#/components/schemas/ServiceLinkRecordPayload"},"header":{"$ref":"#/components/schemas/JWSHeader"},"signature":{"$ref":"#/components/schemas/Base64URL"},"protected":{"$ref":"#/components/schemas/Base64URL"}}},"SourceServiceLinkInitRequest":{"required":["code","service_id","slr_id","surrogate_id"],"type":"object","properties":{"code":{"type":"string"},"slr_id":{"type":"string"},"service_id":{"type":"string"},"surrogate_id":{"type":"string"}}},"ServiceLinkInitResponse":{"required":["code","slr_id"],"type":"object","properties":{"code":{"type":"string"},"slr_id":{"type":"string"}}},"SinkServiceLinkInitRequest":{"required":["code","pop_key","service_id","slr_id","surrogate_id"],"type":"object","properties":{"code":{"type":"string"},"slr_id":{"type":"string"},"service_id":{"type":"string"},"surrogate_id":{"type":"string"},"pop_key":{"$ref":"#/components/schemas/ServicePopKey"}}},"WithinServiceConsentSignResponse":{"required":["consent_record","consent_status_record"],"type":"object","properties":{"consent_record":{"$ref":"#/components/schemas/ConsentRecordSigned"},"consent_status_record":{"$ref":"#/components/schemas/ConsentStatusRecordSigned"}}},"WithinServiceConsentSignRequest":{"required":["consent_record_payload","consent_status_record_payload"],"type":"object","properties":{"consent_record_payload":{"$ref":"#/components/schemas/ConsentRecordPayload"},"consent_status_record_payload":{"$ref":"#/components/schemas/ConsentStatusRecordPayload"},"consent_status_records_list":{"type":"array","items":{"$ref":"#/components/schemas/ConsentStatusRecordSigned"}}}},"ThirdPartyReuseConsentSignResponse":{"required":["sink","source"],"type":"object","properties":{"sink":{"$ref":"#/components/schemas/WithinServiceConsentSignResponse"},"source":{"$ref":"#/components/schemas/WithinServiceConsentSignResponse"}}},"ThirdPartyReuseConsentSignRequest":{"required":["sink","source"],"type":"object","properties":{"sink":{"$ref":"#/components/schemas/WithinServiceConsentSignRequest"},"source":{"$ref":"#/components/schemas/WithinServiceConsentSignRequest"}}}},"securitySchemes":{"bearer-key":{"type":"http","scheme":"bearer","bearerFormat":"token"}}}}